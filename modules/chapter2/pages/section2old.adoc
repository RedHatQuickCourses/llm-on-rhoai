= Modifying the OpenShift AI TLS Certificate

// video::llm_tls_v3.mp4[width=640]

[NOTE]

An SSL/TLS certificate is a digital object that allows systems to verify the identity & subsequently establish an encrypted network connection to another system using the Secure Sockets Layer/Transport Layer Security (SSL/TLS) protocol.

By default, the Single Model Serving Platform in Openshift AI v2.10 uses a self-signed certificate generated during installation for the endpoints that are created when deploying a Model server. 

This can be counterintuitive because the OCP Cluster already has certificates configured which will be used by default for endpoints like Routes. 

This following procedure explains how to use the same certificate from the OpenShift Container cluster for OpenShift AI.

== Use OpenShift Certificates for Ingress Routes

[NOTE]
Most customers will not use the self-signed certificates, opting instead to use certificates generated by their own authority.  Therefore, this step of adding secrets to OpenShift & OpenShift AI is a common process during installation.

=== Navigate to the OpenShift Container Cluster Dashboard

[IMPORTANT]
The content of the Secret (data) should contain two items, *tls.cert* and *tls.key*. They are the certificate and key that are used for all the OpenShift Routes.  The actual name will include the term *cert*, but could be different from the example. 

=== Collect the Secret YAML Text: 

    . In the Navigation pane on the left, click on the *Workloads* section, then *Secrets* under Workloads.
    . From the Project dropdown, toggle the *show default projects* radial button to on. 
    . Select the *openshift-ingress* project from the list. 

image::openshiftingress_project.png[width=640]

    . Locate the file named *cert-manager-ingress-cert*, type should be *kubernetes.io/tls*
    . Click on the filename to open the secret, select the *YAML Tab*
    . Copy all the text from the window, and ensure that you scroll down.  (CTL-A should work).

image::ocp_ingress_cert_yaml.png[width=640]

=== Clean & Deploy the Secret YAML Text: 

    * Click on the Project dropdown again, select the *Istio-system* project
    * Select the *Create* button on the right, then Select the *from YAML* option.
    * Delete the text from the Window, and *paste the copied Secret text*

    * Cleanup the YAML Text to just keep the relevant content. It should look like the YAML file below (the name of the secret will be different, it's normally tied to the date the RDHP Cluster was deployed). 

```yaml
kind: Secret
apiVersion: v1
metadata:
name: cert-manager-ingress-cert
data:
  tls.crt: >-
    LS0tLS1CRUd...
  tls.key: >-
    LS0tLS1CRUd...
type: kubernetes.io/tls
```
image::ocp_istio_cert.png[width=640]


* Copy the name of the secret from line 4, just the name  (optional, but helpful)
* Click *create* to apply this YAML into the istio-system project (namespace).

*We have copied the Secret used by OCP & made it available to be used by OAI.*